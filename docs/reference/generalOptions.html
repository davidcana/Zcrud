<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ZCrud API reference - General options</title>
        
        <script type="text/javascript" src="/lib/syntaxHighlighter/lib.js"></script>
        
        <link rel="stylesheet" type="text/css" href="/themes/basic/basic.css" media="all">
        <link rel="stylesheet" type="text/css" href="/docs.css">
        <link rel="stylesheet" type="text/css" href="/lib/syntaxHighlighter/theme.css">
    </head>
    <body>

        <h1>ZCrud API reference - General options</h1>
        
        <p>
            The list of general options (those not related to a field) is:
        </p>
        <ul class="generalOptionList">
            <li>
                <a id="ajax"></a>
                <div class="header">
                    <span class="name">ajax</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    It allows to set up options about AJAX. The default value is:
                    <pre class="brush: javascript">
        ajax: {
            ajaxFunction: $.ajax,
            defaultFormAjaxOptions: {
                dataType   : 'json',
                contentType: 'application/json; charset=UTF-8',
                type       : 'POST'
            },
            ajaxPreFilter: function( data ){
                return data;
            },
            ajaxPostFilter : function( data ){
                return data;
            }
        }
                    </pre>
                    
                    Suboptions are:
                    <ul>
                        <li><em>ajaxFunction</em>. A function used to make the AJAX calls. Useful for testing purposes.</li>
                        <li><em>defaultFormAjaxOptions</em>. Makes it easy to customize options about the AJAX requests.</li>
                        <li><em>ajaxPreFilter</em> and <em>ajaxPostFilter</em>. They allow to do some processing before and after the AJAX calls.</li>
                    </ul>
                </div>
            </li>
            <li>
                <a id="defaultFormConf"></a>
                <div class="header">
                    <span class="name">defaultFormConf</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    Makes it easy to set up some default options about forms. This options can be overwritten in the configuration option of a page. The default value is:
                    <pre class="brush: javascript">
        defaultFormConf: {
            event: 'batch',    // possible values: 'fieldChange', 'batch'
            dataToSend: 'all', // possible values: 'modified', 'all',
            modifiedFieldsClass: 'zcrud-modified-field',
            modifiedRowsClass: 'zcrud-modified-row',
            hideTr: function( $tr ){
                $tr.fadeOut();
            },
            showTr: function( $tr ){
                $tr.fadeIn();
            },
            buttons: {
                toolbar: {
                    undo: true,
                    redo: true,
                    cancel: true
                },
                byRow: {
                    openEditRegisterForm: true,
                    openDeleteRegisterForm: true,
                    deleteRegisterRow: true,
                }
            }
        }
                    </pre>
                    
                    Suboptions are:
                    <ul>
                        <li><em>url</em>. The server URL to connect.</li>
                        <li><em>files</em>. Defines the list of fields of this page.</li>
                        <li><em>event</em> (possible values: 'fieldChange', 'batch' ). The event used to save the changes. If set to 'fieldChange' every time a field is changed ZCrud will send the chnage to the server; if set to 'batch' the user must clic a 'Save' button.</li>
                        <li><em>dataToSend</em> (possible values: 'modified', 'all' ). If value is 'modified' only the changed values are sent to the server; if is 'all' ZCrud will send all the data.</li>
                        <li><em>modifiedFieldsClass</em> and <em>modifiedRowsClass</em>. The class names added by ZCrud when a field is changed or if a row is changed.</li>
                        <li><em>hideTr</em> and <em>showTr</em>. Functions to customize hide/show rows.</li>
                        <li><em>buttons</em>. Defines the buttons in a form. See <a href="fields.html#buttons">field buttons</a> for details.</li>
                    </ul>
                </div>
            </li>
            <li>
                <a id="entityId"></a>
                <div class="header">
                    <span class="name">entityId</span>
                    <span class="dataType">string</span>
                    <span class="default">'entity'</span>
                </div>
                <div class="body">
                    An unique identifier to allow several instances of ZCrud running in a page.
                </div>
            </li>
            <li>
                <a id="events"></a>
                <div class="header">
                    <span class="name">events</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    User's actions can trigger some events. ZCrud allows to define functions that will be executed when an event is thrown. The default value is:
                    <pre class="brush: javascript">
        events: {
            formClosed: function ( data, event ) {},
            formCreated: function ( data ) {},
            formSubmitting: function ( data, event ) {},
            recordAdded: function ( data, event ) {},
            recordDeleted: function ( data, event ) {},
            recordUpdated: function ( data, event ) {},
            selectionChanged: function ( data ) {}
        }
                    </pre>
                    See <a href="events.html">events</a> for more details.
                </div>
            </li>
            <li>
                <a id="fatalErrorFunction"></a>
                <div class="header">
                    <span class="name">fatalErrorFunction</span>
                    <span class="dataType">function</span>
                    <span class="default">a function</span>
                </div>
                <div class="body">
                
                    This function is executed if ZCrud finds a fatal error (this must not happened!). Useful, at least, for testing purposes. The default value is:
                    <pre class="brush: javascript">
        fatalErrorFunction: function( message ){
            alert( message );
        }
                    </pre>
                </div>
            </li>
            <li>
                <a id="fields"></a>
                <div class="header">
                    <span class="name">fields</span>
                    <span class="dataType">object</span>
                    <span class="default">{}</span>
                </div>
                <div class="body">
                    The list of fields to manage. An example:
                    <pre class="brush: javascript">
    fields: {
        id: {
            key: true,
            sorting: false
        },
        name: {
            width: '90%'
        },
        description: {
            type: 'textarea',
            formFieldAttributes: {
                rows: 6,
                cols: 80
            }
        }
    }
                    </pre>
                </div>
            </li>
            <li>
                <a id="fieldsConfig"></a>
                <div class="header">
                    <span class="name">fieldsConfig</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    Defines some default options for fields. An example:
                    <pre class="brush: javascript">
        fieldsConfig: {
            defaultFieldOptions: {
                datetime: {
                    inline: false,
                    minYear: 1950,
                    maxYear: 2050,
                    maxHour: 23,
                    minutesStep: 5,
                    timerDelay: 100
                },
                date: {
                    inline: false,
                    minYear: 1950,
                    maxYear: 2050
                },
                time: {
                    inline: false,
                    maxHour: 99,
                    minutesStep: 5,
                    timerDelay: 100
                }
            },
            getDefaultFieldTemplate: function( field ){
                return field.type + '@templates/fields/basic.html';
            }
        }
                    </pre>
                    
                    The options are:
                    <ul>
                        <li><em>defaultFieldOptions</em>. Default custom options for fields, by type.</li>
                        <li><em>getDefaultFieldTemplate</em>. A function to build the path of the template of a field.</li>
                    </ul>
                </div>
            </li>
            <li>
                <a id="i18n"></a>
                <div class="header">
                    <span class="name">i18n</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    Configuration options about i18n. Default value:
                    <pre class="brush: javascript">
        i18n: {
            language: 'en',
            filesPath: 'i18n',
            i18nArrayVarName: 'i18nArray',
            files: {}
        }
                    </pre>
                    
                    The options are:
                    <ul>
                        <li><em>language</em>. The language to use.</li>
                        <li><em>filesPath</em>. The path to the i18n files.</li>
                        <li><em>i18nArrayVarName</em>. The variable name containing the translated texts.</li>
                        <li><em>files</em>. The file names to load.</li>
                    </ul>
                    
                    An example:
                    <pre class="brush: javascript">
        i18n: {
            language: 'es',
            files: { 
                en: [ 'en-common.json', 'en-services.json' ],
                es: [ 'es-common.json', 'es-services.json' ] 
            }
        }
                    </pre>
                    
                    Take a look at <a href="/tutorial/localization.html">Localization</a>.
                </div>
            </li>
            <li>
                <a id="logging"></a>
                <div class="header">
                    <span class="name">logging</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    Configuration options about logging. Zcrud uses <a href="http://log4javascript.org/">log4javascript</a> as logging framework. It is off by default. Default value:
                    <pre class="brush: javascript">
        logging: {
            isOn: false,
            level: log4javascript.Level.ERROR
        }
                    </pre>

                    The options are:
                    <ul>
                        <li><em>isOn</em>. On/off logging.</li>
                        <li><em>level</em>. Minimum level to log. See <a href="http://log4javascript.org/docs/manual.html#levels">log4javascript levels</a> for details.</li>
                    </ul>
                    
                    An example (activate logging and set level to <em>DEBUG</em>):
                    <pre class="brush: javascript">
        logging: {
            isOn: true,
            level: log4javascript.Level.DEBUG
        }
                    </pre>
                </div>
            </li>
            <li>
                <a id="pages"></a>
                <div class="header">
                    <span class="name">pages</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    The <em>pages</em> property contains 4 elements, the 4 <em>pages</em> managed by ZCrud:
                    <ul>
                        <li><em>create</em>. A form that creates a new record.</li>
                        <li><em>delete</em>. A form that deletes an existing record.</li>
                        <li><em>list</em>. Shows a list of records.</li>
                        <li><em>update</em>. A form that updates an existing record.</li>
                    </ul>
                    
                    Default value:
                    <pre class="brush: javascript">
        pages: {
            'list': {
                template: 'listDefaultTemplate@templates/lists.html',
                components: {
                    paging: {
                        isOn: true,
                        defaultPageSize: 10,
                        pageSizes: [10, 25, 50, 100, 250, 500],
                        pageSizeChangeArea: true,
                        gotoPageArea: 'combobox', // possible values: 'textbox', 'combobox', 'none'
                        maxNumberOfAllShownPages: 5,
                        block1NumberOfPages: 1,
                        block2NumberOfPages: 5,
                        block3NumberOfPages: 1
                    },
                    sorting: {
                        isOn: false,
                        loadFromLocalStorage: true,
                        default: {
                            fieldId: undefined,
                            type: undefined
                        },
                        allowUser: false
                    },
                    filtering: {
                        isOn: false,
                        filteringComponentId: 'zcrud-filtering',
                        elementIdSuffix: '-filter'
                    },
                    selecting: {
                        isOn: false,
                        multiple: true,
                        mode: [ 'checkbox', 'onRowClick' ] // possible values: 'checkbox' and 'onRowClick'
                    },
                    editing: {
                        isOn: false,
                        event: 'batch',    // possible values: 'fieldChange', 'batch'
                        dataToSend: 'all', // possible values: 'modified', 'all',
                        modifiedFieldsClass: 'zcrud-modified-field',
                        modifiedRowsClass: 'zcrud-modified-row',
                        hideTr: function( $tr ){
                            $tr.fadeOut();
                        },
                        showTr: function( $tr ){
                            $tr.fadeIn();
                        }
                    }
                },
                buttons: {
                    toolbar: {
                        newRegisterRow: undefined,
                        openNewRegisterForm: undefined,
                        undo: undefined,
                        redo: undefined,
                        save: undefined
                    },
                    byRow: {
                        openEditRegisterForm: undefined,
                        openDeleteRegisterForm: undefined,
                        deleteRegisterRow: undefined,
                    }
                }
            }, 'create': {
                template: "formDefaultTemplate@templates/forms.html"
            }, 'update': {
                template: "formDefaultTemplate@templates/forms.html"
            }, 'delete': {
                template: "deleteDefaultTemplate@templates/forms.html"
            }
        }
                    </pre>
                    
                    Each <em>page</em> can contain these configuration options:
                    <ul>
                        <li><em>url</em>. The server URL to connect.</li>
                        <li><em>template</em>. The template that ZCrud will use to build the page.</li>
                        <li><em>buttons</em>. Defines the buttons in the page. See <a href="fields.html#buttons">field buttons</a> for details.</li>
                        <li><em>components</em>. A lot of configuration options grouped by component. Nowadays only for lists. There are 5 components:
                            <ul>
                                <li>
                                    <em>paging</em>. All about paging. On by default. Suboptions:
                                    <ul>
                                        <li><em>isOn</em>. On/off paging.</li>
                                        <li><em>defaultPageSize</em>. Default number of items to show per page.</li>
                                        <li><em>pageSizes</em>. A list of page sizes. The user can select any of these.</li>
                                        <li><em>pageSizeChangeArea</em>. .</li>
                                        <li><em>gotoPageArea</em>. Type of <em>Go to page</em> element. Possible values a are 'textbox', 'combobox' and 'none'.</li>
                                        <li><em>maxNumberOfAllShownPages</em>. ZCrud will not show more than this number of page links.</li>
                                        <li><em>block1NumberOfPages</em>. Maximum number of pages to show (first pages).</li>
                                        <li><em>block2NumberOfPages</em>. Maximum number of pages to show around current page.</li>
                                        <li><em>block3NumberOfPages</em>. Maximum number of pages to show (last pages).</li>
                                    </ul>
                                </li>
                                <li>
                                    <em>sorting</em>. All about sorting. Off by default.
                                    <ul>
                                        <li><em>isOn</em>. On/off sorting.</li>
                                        <li><em>loadFromLocalStorage</em>. .</li>
                                        <li>
                                            <em>default</em>. Default sorting:
                                            <ul>
                                                <li><em>fieldId</em>. Sort by this field.</li>
                                                <li><em>type</em>. Sort type (<em>asc</em> or <em>desc</em>).</li>
                                            </ul>
                                        </li>
                                        <li><em>allowUser</em>. .</li>
                                    </ul>
                                </li>
                                <li>
                                    <em>filtering</em>. All about filtering. Off by default.
                                    <ul>
                                        <li><em>isOn</em>. On/off filtering.</li>
                                        <li><em>filteringComponentId</em>. .</li>
                                        <li><em>elementIdSuffix</em>. .</li>
                                    </ul>
                                </li>
                                <li>
                                    <em>selecting</em>. All about selecting. Off by default.
                                    <ul>
                                        <li><em>isOn</em>. On/off selecting.</li>
                                        <li><em>multiple</em>. Defines whether multiple selection is allowed.</li>
                                        <li><em>mode</em>. Defines the selecting mode. Possible values are <em>checkbox</em> (must click a checkbox) and <em>onRowClick</em> (must click on the row, no checkbox present).</li>
                                    </ul>
                                </li>
                                <li>
                                    <em>editing</em>. All about editing. Off by default.
                                    <ul>
                                        <li><em>isOn</em>. On/off editing. If true the list is a editable list; if false it is an only read list.</li>
                                        <li><em>event</em> (possible values: 'fieldChange', 'batch' ). The event used to save the changes. If set to 'fieldChange' every time a field is changed ZCrud will send the chnage to the server; if set to 'batch' the user must clic a 'Save' button.</li>
                                        <li><em>dataToSend</em> (possible values: 'modified', 'all' ). If value is 'modified' only the changed values are sent to the server; if is 'all' ZCrud will send all the data.</li>
                                        <li><em>modifiedFieldsClass</em> and <em>modifiedRowsClass</em>. The class names added by ZCrud when a field is changed or if a row is changed.</li>
                                        <li><em>hideTr</em> and <em>showTr</em>. Functions to customize hide/show rows.</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <a id="saveUserPreferences"></a>
                <div class="header">
                    <span class="name">saveUserPreferences</span>
                    <span class="dataType">boolean</span>
                    <span class="default">true</span>
                </div>
                <div class="body">
                    Defines whether ZCrud saves user preferences. Nowadays applicable to paging and sorting preferences.
                </div>
            </li>
            <li>
                <a id="templates"></a>
                <div class="header">
                    <span class="name">templates</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    Configuration options about templates. Default value:
                    <pre class="brush: javascript">
        templates: {
            declaredRemotePageUrls: [],
            busyTemplate: "busyDefaultTemplate@templates/misc.html"
        }
                    </pre>
                    
                    The options are:
                    <ul>
                        <li><em>declaredRemotePageUrls</em>. Useful for declaring template files. There is no need to configurate it manually.</li>
                        <li><em>busyTemplate</em>. The template to use when ZCrud is <em>busy</em>.</li>
                    </ul>
                </div>
            </li>
            <li>
                <a id="validation"></a>
                <div class="header">
                    <span class="name">validation</span>
                    <span class="dataType">object</span>
                    <span class="default">an object</span>
                </div>
                <div class="body">
                    Configuration options about validation. Zcrud uses <a href="http://www.formvalidator.net/">jQuery Form Validator</a> as validation framework.
                    <pre class="brush: javascript">
        validation: {
            modules: '',
            rules: {},
            configuration: {
                errorMessageClass: 'form-error-inline-absolute', // form-error-fixed, form-error-inline-static and form-error-inline-absolute already exist
                borderColorOnError: ''
            }
        }
                    </pre>
                    
                    The options are:
                    <ul>
                        <li><em>modules</em>. Modules of <em>jQuery Form Validator</em> used.</li>
                        <li><em>rules</em>. Data must match these rules.</li>
                        <li><em>configuration</em>. An object that is sent to <em>jQuery Form Validator</em>. It is possible to add more options. The 2 already configured options are:
                            <ul>
                                <li><em>errorMessageClass</em>. The CSS class to add to the error messages. It is possible to set any, but there are 3 predefined: <em>form-error-fixed</em> (fixed position), <em>form-error-inline-static</em> (inline static position) and <em>form-error-inline-absolute</em> (absolute position).</li>
                                <li><em>borderColorOnError</em>. The color to use in the border of the error messages. Disabled by default.</li>
                            </ul>
                        </li>
                    </ul>
                    For more information about these take a look at <a href="http://www.formvalidator.net/">jQuery Form Validator</a>.
                    
                    An example:
                    <pre class="brush: javascript">
        validation: {
            modules: 'security, date',
            rules: {
                '#zcrud-name': {
                    validation: 'length',
                    length: '3-12'
                },
                '#zcrud-number': {
                    validation: 'number',
                    allowing: 'float'
                }
            }
        }
                    </pre>
                </div>
            </li>
        </ul>
        
    </body>
</html>